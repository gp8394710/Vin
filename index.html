<HTML>

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Banking App</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
		
		<style>
		/* CSS Reset */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box; /* Ensures padding and borders are included in element's total width and height */
}

/* General page styling */
body {
    font-family: Arial, sans-serif;
    margin: 0; /* Remove default margin */
    padding: 0; /* Remove default padding */
}

/* Safari Keyboard Adjustment */
body.keyboard-active {
    position: fixed; /* Keeps the body fixed in place when the keyboard is active */
    bottom: 0; /* Aligns the body with the bottom of the screen */
    left: 0;
    right: 0;
    overflow-y: hidden; /* Prevents background scrolling when the keyboard is open */
}

/* Page content styling */
.page {
    display: none;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100vh;
    position: relative; /* Relative positioning for internal elements */
    transition: transform 0.3s ease; /* Smooth transition */
    overflow: hidden; /* Prevents overflow and unwanted white space */
}

.page.active {
    display: flex;
}

/* Adjust the page content when the keyboard is active */
@media screen and (max-width: 768px) {
    body.keyboard-active .page {
        transform: translateY(0); /* Adjusting to ensure no space is created */
    }
}

/* Page 1: Custom Background Color and Margins */
#page1 {
    background-color: #657786; /* Set consistent background color for page 1 */
    margin: 0; /* Ensure no extra margin */
}

/* Page 2: Maintain Original Styles */
#page2 {
    /* Add specific styles for page 2 here if needed */
}

/* Page 3: Maintain Original Styles */
#page3 {
    background-color: #657786; /* Keep background color consistent */
    color: white; /* Ensure text color contrasts with background */
}

/* Login card styling */
.login-card {
    background-color: #003366;
    color: white;
    padding: 20px;
    border-radius: 10px;
    width: 100%;
    max-width: 360px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    text-align: center;
}

.login-card h2 {
    margin-bottom: 20px;
}

/* Input container styling */
.input-container {
    position: relative;
    width: 100%;
    max-width: 360px;
    margin-bottom: 20px;
}

/* Input field styling */
.input-container input {
    padding-left: 40px; /* Reduced padding to bring the text closer to the icon */
    width: 100%;
    font-size: 16px;
    border: 1px solid #ccc;
    border-radius: 5px;
    box-sizing: border-box;
    height: 45px;
    background-color: #fff; /* Added background color */
    transition: background-color 0.3s ease, border-color 0.3s ease; /* Added transitions */
}

/* Updated Placeholder Styling */
.input-container input::placeholder {
    color: #888;
    line-height: 45px; /* Keeps placeholder vertically centered */
    padding-left: 5px; /* Reduced padding-left to bring placeholder text closer to the icon */
}

/* Ensures placeholder remains visible and doesn't move when typing */
.input-container input:focus::placeholder {
    color: #888;
}

/* Icon styling */
.input-container .icon {
    position: absolute;
    left: 12px;
    top: 50%;
    transform: translateY(-50%);
    font-size: 18px;
    color: #888;
}

/* Button styling */
button {
    background-color: #0056b3;
    border: none;
    color: white;
    padding: 10px 20px;
    cursor: pointer;
    font-size: 16px;
    border-radius: 5px;
    margin-top: 20px;
}

button:hover {
    background-color: #003d7a;
}

/* Dashboard Navigation */
.dashboard-nav {
    position: absolute;
    top: 0;
    right: 0;
    padding: 20px;
    z-index: 10;
}

.nav-btn {
    background-color: #0056b3;
    color: white;
    padding: 10px;
    border: none;
    font-size: 18px;
    border-radius: 5px;
    cursor: pointer;
}

.nav-btn:hover {
    background-color: #003d7a;
}

/* Navigation Menu Styling */
#nav-menu {
    margin-top: 10px;
    background-color: #cc0000; /* Red background */
    padding: 10px;
    border-radius: 5px;
}

#nav-menu ul {
    list-style-type: none;
    padding: 0;
}

#nav-menu ul li {
    margin-bottom: 10px;
}

#nav-menu ul li a {
    text-decoration: none;
    color: white; /* White text */
    font-size: 18px;
}

#nav-menu ul li a:hover {
    color: #003d7a;
}

/* Welcome Message Styling */
.welcome-message {
    font-size: 24px;
    color: white;
    background-color: #003366; /* Match the balance dashboard background */
    padding: 10px 20px;
    border-radius: 5px;
    position: absolute;
    top: 20px;
    left: 20px;
    z-index: 10;
}

/* Balance Dashboard Styling */
.balance-dashboard {
    display: flex;
    justify-content: center;
    align-items: center;
    margin-top: 80px; /* Added margin to move it down */
    margin-bottom: 20px;
    background-color: #003366;
    color: white;
    padding: 20px;
    border-radius: 10px;
    width: 100%;
    max-width: 360px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    position: relative;
    font-size: 24px;
}

#balance {
    margin-right: 20px;
}

#toggle-balance {
    cursor: pointer;
    font-size: 24px;
}

/* Funds Analysis section */
.funds-analysis {
    text-align: center;
    margin-bottom: 20px;
}

/* Fund Chart Container */
.fund-chart-container {
    width: 100%;
    max-width: 600px;
    height: 300px;
    margin-bottom: 20px;
}

/* Transfer Funds Button */
.transfer-funds-btn {
    background-color: #0056b3;
    border: none;
    color: white;
    padding: 10px 20px;
    cursor: pointer;
    font-size: 16px;
    border-radius: 5px;
    margin-top: 20px;
}

.transfer-funds-btn:hover {
    background-color: #003d7a;
}

/* Transfer Funds styling */
.transfer-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 20px;
    position: relative;
}

.transfer-container input,
.transfer-container select {
    width: 100%;
    max-width: 360px;
    padding: 10px;
    font-size: 16px;
    border: 1px solid #ccc;
    border-radius: 5px;
    padding-left: 45px; /* Adjusted padding to ensure space for the icon */
    box-sizing: border-box;
    height: 45px;
}

/* Updated Icon Styling for Transfer Container */
.transfer-container .icon {
    position: absolute;
    left: 12px;
    top: 50%;
    transform: translateY(-50%);
    font-size: 18px;
    color: #888;
}

/* Success Page */
#page4 {
    background-color: #f8d7da; /* Light red background */
    color: #721c24; /* Dark red text */
    text-align: center;
}

#page4 h2 {
    font-size: 32px;
    color: #721c24; /* Dark red text */
}

#page4 p {
    font-size: 18px;
    color: #721c24; /* Dark red text */
}

/* Pop-up Styling */
.popup {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background-color: white;
    border: 1px solid #ccc;
    padding: 20px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    z-index: 1000;
    max-width: 90%;
    text-align: center;
}

.popup button {
    background-color: #0056b3;
    border: none;
    color: white;
    padding: 10px 20px;
    cursor: pointer;
    font-size: 16px;
    border-radius: 5px;
    margin-top: 10px;
}

.popup button:hover {
    background-color: #003d7a;
}
/* Spinner Styling */
.spinner {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 1000;
    display: flex;
    justify-content: center;
    align-items: center;
}

.spinner-border {
    width: 3rem;
    height: 3rem;
    border: 4px solid #ccc;
    border-top-color: #333;
    border-radius: 50%;
    animation: spin 1s linear infinite;
}

@keyframes spin {
    to {
        transform: rotate(360deg);
    }
}

		</style>
</head>
<body>

<div id="page1" class="page active dark-red-page">
    <div class="login-card">
        <h2>Login</h2>
        <div class="input-container">
            <i class="fas fa-user icon"></i>
            <input type="text" id="username" placeholder="Enter Username" required>
        </div>
        <div class="input-container">
            <i class="fas fa-lock icon"></i>
            <input type="password" id="password" placeholder="Enter Password" required>
        </div>
        <button onclick="login()">Login</button>
    </div>
<!-- Loading spinner (hidden by default) -->
    <div id="loadingSpinner" class="loading-spinner" style="display: none;">
        <i class="fas fa-spinner fa-spin"></i> Logging in...
    </div>
</div>

<!-- Page 2: Dashboard -->
<div id="page2" class="page">
    <div class="dashboard-nav">
        <button id="nav-toggle" class="nav-btn"><i class="fas fa-bars"></i></button>
        <nav id="nav-menu" style="display: none;">
            <ul>
                <li><a href="#">Wallet</a></li>
                <li><a href="#">Security</a></li>
                <li><a href="#" onclick="logout()">Logout</a></li>
            </ul>
        </nav>
    </div>

<!-- Welcome Message -->
    <div class="welcome-message">
        Welcome, James
    </div>

    <!-- Balance Dashboard -->
    <div class="balance-dashboard">
        <span id="balance">$437,000,000</span>
        <i id="toggle-balance" class="fas fa-eye"></i>
    </div>

<!-- Funds Analysis -->
    <div class="funds-analysis">
        <h3>Funds Analysis</h3>
        <p>Your current funds are stable.</p>
    </div>

 <!-- Fund Chart -->
    <div class="fund-chart-container">
        <canvas id="fundChart"></canvas>
    </div>
 <button class="transfer-funds-btn" onclick="goToPage(3)">Transfer Funds</button>
</div>

<!-- Page 3: Transfer Funds -->
<div id="page3" class="page">
    <h2>Transfer Funds</h2>
    <div class="transfer-container">
        <div class="input-container">
            <i class="fas fa-user icon"></i>
            <input type="text" id="name" placeholder="Enter Name" required>
        </div>
        <div class="input-container">
            <i class="fas fa-dollar-sign icon"></i>
            <input type="text" id="amount" placeholder="Enter Amount" required>
        </div>
<div class="input-container">
            <i class="fas fa-building icon"></i>
            <input type="text" id="account" placeholder="Enter Account Number" maxlength="17"required>
        </div>

           <select id="bank" required>
                <option value="" disabled selected>Select Bank</option>
                <option value="1">Chase Bank</option>
                <option value="2">Bank of America</option>
                <option value="3">PNC Bank</option>
                <option value="4">TD Bank</option>
                <option value="5">Regions Bank</option>
                <option value="6">Truist Bank</option>
                <option value="7">U.S. Bank</option>
                <option value="8">First Horizon 

Bank</option>
                <option value="9">Flagstar Bank</option>
                <option value="10">Woodforest National Bank</option>

 <option value="11">Citibank</option>
                <option value="12">M&T Bank</option>
                <option value="13">KeyBank</option>
                <option value="14">BMO Bank</option>
                <option value="15">Huntington Bank</option>
                <option value="16">Fifth Third Bank</option>

<option value="17">Citizens Bank</option>
                <option value="18">Comerica Bank</option>
                <option value="19">Cadence Bank</option>
                <option value="20">First National Bank</option>

<option value="21">First Convenience Bank</option>
                <option value="22">First Interstate Bank</option>

<option value="23">Umpqua Bank</option>
                <option value="24">Prosperity Bank</option>
                <option value="25">Capital One</option>
                <option value="26">Old National Bank</option>
                <option value="27">SouthState Bank</option>
                <option value="28">Synovus Bank</option>
                <option value="29">Fulton Bank</option>
                <option value="30">Simmons Bank</option>

<option value="31">Bank OZK</option>
                <option value="32">Valley National Bank</option>
                <option value="33">Arvest Bank</option>
                <option value="34">WaFd Bank</option>
                <option value="35">Webster Bank</option>
                <option value="36">United Community Bank</option>
                <option value="37">Associated Bank</option>
                <option value="38">WesBanco Bank</option>

<option value="39">Frost Bank</option>
                <option value="40">Hancock Whitney Bank</option>
                <option value="41">IBC Bank</option>
                <option value="42">WellsFargo</option>
                <option value="43">Trustmark Bank</option>
                <option value="44">Ameris Bank</option>
                <option value="45">Renasant Bank</option>
                <option value="46">NBT Bank</option>
                <option value="47">Commerce Bank</option>

<option value="48">Banner Bank</option>
                <option value="49">TrustCo Bank</option>
                <option value="50">Northwest Bank</option>
                <option value="51">Pinnacle Bank</option>
                <option value="52">First Commonwealth Bank</option>
                <option value="53">Atlantic Union Bank</option>

<option value="54">Zions Bank</option>
                <option value="55">Rockland Trust</option>
                <option value="56">First Merchants Bank</option>
                <option value="57">BancFirst</option>
                <option value="58">First National Bank of Omaha</option>
                <option value="59">City National Bank</option>
                <option value="60">Great Southern Bank</option>
                <option value="61">Provident 

Bank</option>
                <option value="62">Independent Bank</option>

<option value="63">California Bank & Trust</option>
            </select>
        </div>
        <button onclick="sendFunds()">Send Funds</button>
    </div>
</div>
<!-- Page 4: Success -->
<div id="page4" class="page">
    <h1>❌</h1>
    <h2><p>Payment Unsuccessful.</p></h2>
    <button onclick="goToPage(2)">Go Back to Dashboard</button>
</div>

<!-- Pop-up -->
<div id="popup" class="popup" style="display: none;">
    <p>We regret to notify you that your account has been temporarily frozen due to an unusually high volume of transactions. This precautionary measure is in place to protect the security of your account.</p>
    <p>To restore access to your account, we kindly request that you visit your local branch at your earliest convenience. Once we complete the verification process, you will be able to access your account and resume transactions.</p>
    <button onclick="goToPage(4)">OK</button>
</div>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="js/script.js"></script>

<script>
// Function to get the current month and previous months in descending order
function getMonthLabels() {
    const months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];
    const date = new Date();
    const currentMonthIndex = date.getMonth();
    const labels = [months[currentMonthIndex]];

    // Get the previous months
    for (let i = 1; i <= currentMonthIndex; i++) {
        labels.push(months[(currentMonthIndex - i + 12) % 12]);
    }

    return labels;
}

// Function to get a sample data array for the chart
function getSampleData(labels) {
    const data = [];
    const currentMonthIndex = labels.indexOf(labels[0]);

    for (let i = 0; i < labels.length; i++) {
        if (i === 0) {
            data.push(null); // Placeholder for the current month balance
        } else {
            data.push(437000000 - (i - 1) * 500); // Sample historical data
        }
    }

    return data;
}

// Initialize chart with the current month first, then previous months
const ctx = document.getElementById('fundChart').getContext('2d');
const monthLabels = getMonthLabels();
const fundChart = new Chart(ctx, {
    type: 'line',
    data: {
        labels: monthLabels,
        datasets: [{
            label: 'Funds Analysis',
            data: getSampleData(monthLabels),
            backgroundColor: 'rgba(0, 86, 179, 0.2)',
            borderColor: '#003d7a',
            borderWidth: 2,
            tension: 0.4,
            fill: true
        }]
    },
    options: {
        responsive: true,
        scales: {
            y: {
                beginAtZero: false
            }
        }
    }
});

// Function to update chart with the current balance
function updateChart(newBalance) {
    const currentMonthIndex = 0; // Current month is always at index 0 in the labels array
    fundChart.data.datasets[0].data[currentMonthIndex] = newBalance;
    fundChart.update();
}

// Simulate fetching the actual balance (replace this with actual data fetching logic)
function fetchAndUpdateBalance() {
    const actualBalance = 439000000; // Replace with logic to get actual balance
    updateChart(actualBalance);
}

// Call this function to fetch and update balance on page load or at the appropriate time
document.addEventListener('DOMContentLoaded', fetchAndUpdateBalance);

// Function to go to a specific page
function goToPage(pageNumber) {
    const pages = document.querySelectorAll('.page');
    pages.forEach(page => page.style.display = 'none');
    document.getElementById(`page${pageNumber}`).style.display = 'flex';

    // Clear inputs on Page 3 if navigating to it
    if (pageNumber === 3) {
        clearPage3Inputs();
    }
}

// Function to clear input fields on Page 3
function clearPage3Inputs() {
    document.getElementById('name').value = '';
    document.getElementById('amount').value = '';
    document.getElementById('account').value = '';
    document.getElementById('bank').selectedIndex = 0; // Reset select box
}

// Function to show the loading spinner
function showSpinner() {
    const spinner = document.createElement('div');
    spinner.id = 'loading-spinner';
    spinner.classList.add('spinner');
    spinner.innerHTML = `
        <div class="spinner-border" role="status">
            <span class="sr-only">Loading...</span>
        </div>
    `;
    document.body.appendChild(spinner);
}

// Function to hide the loading spinner
function hideSpinner() {
    const spinner = document.getElementById('loading-spinner');
    if (spinner) {
        spinner.remove();
    }
}

// Login function with validation, loading spinner, and immediate spinner hide on alert OK click
function login() {
    const username = document.getElementById('username').value;
    const password = document.getElementById('password').value;

    // Show the spinner when the login process starts
    showSpinner();

    // Simulate an asynchronous login process (replace this with actual login logic)
    setTimeout(() => {
        // Validation check for username and password
        if (username === 'James78836' && password === 'henry945') {
            hideSpinner(); // Hide spinner after validation
            goToPage(2); // Go to dashboard on successful login
        } else {
            hideSpinner(); // Hide spinner immediately before showing the alert
            alert('Invalid username or password. Please try again.');
        }
    }, 2000); // Simulate a 2-second loading time for the spinner
}

// Logout function
function logout() {
    window.location.href = 'index.html'; // Ensure 'index.html' is your login page URL
    window.location.reload();
}

// Navigation Menu Toggle
document.getElementById('nav-toggle').addEventListener('click', () => {
    const navMenu = document.getElementById('nav-menu');
    navMenu.style.display = navMenu.style.display === 'none' ? 'block' : 'none';
});

// Balance Toggling
let balanceVisible = true;
document.getElementById('toggle-balance').addEventListener('click', () => {
    const balanceElement = document.getElementById('balance');
    if (balanceVisible) {
        balanceElement.textContent = '*****'; // Hide balance
    } else {
        balanceElement.textContent = '$437,000,000'; // Show balance
    }
    balanceVisible = !balanceVisible;
});

// Function to display a pop-up message and redirect after confirmation
function showPopupAndRedirect(message, redirectPage) {
    const popup = document.createElement('div');
    popup.classList.add('popup');
    popup.innerHTML = `
        <p>${message}</p>
        <button id="popup-ok-button">OK</button>
    `;
    document.body.appendChild(popup);

    // Add event listener to the OK button
    document.getElementById('popup-ok-button').addEventListener('click', () => {
        goToPage(redirectPage);
        popup.remove();
    });
}

// Function to handle sending funds with spinner in Page 3
function sendFunds() {
    const amount = document.getElementById('amount').value;
    const account = document.getElementById('account').value;
    const bank = document.getElementById('bank').value;

    if (amount && account && bank) {
        showSpinner();

        // Simulate the sending process (replace with actual sending logic)
        setTimeout(() => {
            const message = 'We regret to notify you that your account has been temporarily frozen due to an unusually high volume of transactions. This precautionary measure is in place to protect the security of your account.<br><br>To restore access to your account, we kindly request that you visit your local branch at your earliest convenience. Once we complete the verification process, you will be able to access your account and resume transactions.';
            hideSpinner(); // Hide the spinner before showing the pop-up
            showPopupAndRedirect(message, 4);
        }, 10000); // 10 seconds for the spinner on page 3
    } else {
        alert('Please enter the amount, account number, name, and select a bank.');
    }
}

// Input validation for Page 3
document.getElementById('name').addEventListener('input', () => {
    const nameInput = document.getElementById('name');
    const nameRegex = /^[A-Za-z\s]*$/; // Allow only letters and spaces
    if (!nameRegex.test(nameInput.value)) {
        nameInput.setCustomValidity('Please enter a valid name (letters only).');
    } else {
        nameInput.setCustomValidity('');
    }
});
document.getElementById('amount').addEventListener('input', () => {
    const amountInput = document.getElementById('amount');
    const amountRegex = /^[0-9]*$/; // Allow only digits
    if (!amountRegex.test(amountInput.value)) {
        amountInput.setCustomValidity('Please enter a valid amount (numbers only).');
    } else {
        amountInput.setCustomValidity('');
    }
});

document.getElementById('account').addEventListener('input', () => {
    const accountInput = document.getElementById('account');
    const accountRegex = /^[0-9]{0,17}$/; // Allow up to 17 digits
    if (!accountRegex.test(accountInput.value)) {
        accountInput.setCustomValidity('Please enter a valid 17-digit account number (numbers only).');
    } else {
        accountInput.setCustomValidity('');
    }
});

// Function to handle navigation back to dashboard
function goBackToDashboard() {
    goToPage(2); // Navigate to Page 2 (dashboard)
    clearPage3Inputs(); // Ensure Page 3 inputs are cleared on return
}

// Automatically hide menus after login
document.addEventListener('DOMContentLoaded', () => {
    const navMenu = document.getElementById('nav-menu');
    navMenu.style.display = 'none'; // Hide nav menu by default
});

// Safari Keyboard Handling

document.querySelectorAll('input, textarea').forEach(input => {
    input.addEventListener('focus', () => {
        // When the keyboard is active, add a class to adjust the layout
        document.body

        // Add a class when the keyboard appears to adjust the layout
        document.body.classList.add('keyboard-active');
    });

    input.addEventListener('blur', () => {
        // Remove the class when the keyboard is closed
        document.body.classList.remove('keyboard-active');
    });
});

// Adjust scroll to ensure page doesn't shift up when the keyboard opens on Safari
window.addEventListener('resize', () => {
    if (document.activeElement.tagName === 'INPUT' || document.activeElement.tagName === 'TEXTAREA') {
        window.setTimeout(() => {
            document.activeElement.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }, 100);
    }
});
</script>
</body>
</html>